<div class="container px-lg-5 mt-lg-5">
    <h4>Search Cities</h4>
    <div class="row">
        <div class="col">
            <form class="form-inline justify-content-end" id="search"
                  (ngSubmit)="onSubmit()" [formGroup]="form!">
                <label class="sr-only" for="byName">City name</label>
                <input type="text" class="form-control mb-2 mr-sm-2" id="byName"
                       formControlName="byName"
                       placeholder="By city name">

                <label class="sr-only" for="commentsLimit"># of comments</label>
                <div class="input-group">
                    <input type="number" max="30"
                           (keyup)="chickCommentsLimit(f.commentsLimit.value)"
                           class="form-control mb-2 mr-sm-2" id="commentsLimit"
                           placeholder="Comments limit" formControlName="commentsLimit"/>
                </div>

                <button type="submit" [disabled]="loading" class="btn btn-primary mb-2">
                            <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1">
                            </span>Search
                </button>
            </form>
        </div>
    </div>
    <div *ngIf="cities.length > 0">
        <div class="row mt-lg-2">
            <div class="col">
                <table class="table table-striped table-hover">
                    <caption>Search results for {{cities.length}} {{cities.length > 1?
                        'cities':'city'}}
                    </caption>
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col">Country</th>
                        <th scope="col">Description</th>
                        <th scope="col">Comments</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let city of cities; let i = index">
                        <th scope="row">{{ i + 1 }}</th>
                        <td>{{ city.name }}</td>
                        <td>{{ city.country }}</td>
                        <td>{{ city.description }}</td>
                        <td>
                            <div class="row">
                                <div class="col-auto">
                                    <button class="btn btn-primary btn-sm" data-toggle="modal"
                                            data-target="#showComments">Show
                                    </button>
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-secondary btn-sm" data-toggle="modal"
                                            data-target="#addComment">Add
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <nav aria-label="City Page navigation">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1"
                               aria-disabled="true">Previous</a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>

<!-- Modal add comment -->
<div class="modal fade" id="addComment" data-backdrop="static" data-keyboard="false" tabindex="-1"
     aria-labelledby="addCommentLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addCommentLabel">Add Comment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="commentForm">
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea class="form-control" id="description" rows="3"
                                  required></textarea>
                    </div>
                    <button type="button" class="btn btn-secondary">Add</button>
                    <button type="button" class="btn btn-link" data-dismiss="modal">Cancel</button>
                </form>
            </div>

        </div>
    </div>
</div>

<!-- Modal show comments-->
<div class="modal fade" id="showComments" data-backdrop="static" data-keyboard="false"
     tabindex="-1" aria-labelledby="showCommentLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="showCommentLabel">What people says about Egypt</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table">
                    <caption></caption>
                    <thead class="thead-light">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Comment</th>
                        <th scope="col">By</th>
                        <th scope="col">Created at</th>
                        <th scope="col">Updated at</th>
                        <th scope="col">Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam
                            aliquid amet consectetur corporis debitis, dignissimos dolorum, ea esse
                            excepturi exercitationem illum nam nesciunt officia placeat provident
                            quisquam ratione velit veritatis?
                        </td>
                        <td>Otto</td>
                        <td>@mdo</td>
                        <td>@mdo</td>
                        <td>
                            <div class="row">
                                <div class="col-auto">
                                    <button disabled class="btn btn-primary btn-sm">Update
                                    </button>
                                </div>
                                <div class="col-auto">
                                    <button disabled class="btn btn-link btn-sm">Delete</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr class="table-success">
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>Thornton</td>
                        <td>@fat</td>
                        <td>@mdo</td>
                        <td>
                            <div class="row">
                                <div class="col">
                                    <button class="btn btn-primary btn-sm">Update</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-link btn-sm">Delete</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Larry</td>
                        <td>the Bird</td>
                        <td>@twitter</td>
                        <td>@mdo</td>
                        <td>
                            <div class="row">
                                <div class="col">
                                    <button disabled class="btn btn-primary btn-sm">Update
                                    </button>
                                </div>
                                <div class="col">
                                    <button disabled class="btn btn-link btn-sm">Delete</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Close
                </button>
            </div>
        </div>
    </div>
</div>
